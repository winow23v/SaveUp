<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>회사명 | 랜딩 페이지</title>

  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config={theme:{extend:{
      colors:{brand:{DEFAULT:"#5b8cff",dark:"#0a46c7"}},
      boxShadow:{soft:'0 8px 30px rgba(0,0,0,0.06)', elev:'0 10px 40px rgba(0,0,0,0.10)'}
    }}}
  </script>

  <style>
    :root{ --bt-desktop:16px; --bt-mobile:88px; }
    #backTop{ bottom:calc(env(safe-area-inset-bottom,0px)+var(--bt-desktop)); }
    @media (max-width:767px){ #backTop{ bottom:calc(env(safe-area-inset-bottom,0px)+var(--bt-mobile)); right:1rem; } }

    .skip-link{ position:fixed; top:.75rem; left:.75rem; z-index:60; background:#5b8cff; color:#fff; padding:.5rem .75rem; border-radius:.5rem; transform:translateY(-160%); transition:.18s }
    .skip-link:focus{ transform:translateY(0); }

    /* Glass header + hero tone (다른 페이지와 톤 일치) */
    .hdr{ background:rgba(255,255,255,.8); backdrop-filter:blur(8px) }
    @supports not (backdrop-filter: blur(8px)){ .hdr{ background:#fff } }
    .hero-wrap{
      position:relative; isolation:isolate;
      background:
        radial-gradient(1200px 600px at 10% -10%, rgba(91,140,255,.20), transparent 60%),
        radial-gradient(1000px 500px at 90% -10%, rgba(10,70,199,.10), transparent 60%),
        linear-gradient(90deg, rgba(91,140,255,.06), rgba(91,140,255,.03));
    }
    .hero-wrap::after{
      content:""; position:absolute; inset:0; z-index:-1;
      background-image:
        linear-gradient(rgba(100,116,139,.06) 1px, transparent 1px),
        linear-gradient(90deg, rgba(100,116,139,.06) 1px, transparent 1px);
      background-size:24px 24px;
      mask-image:radial-gradient(80% 60% at 50% 10%, #000 55%, transparent 70%);
    }
    .gtext{ background:linear-gradient(90deg,#0a46c7,#5b8cff 45%,#7ea4ff); -webkit-background-clip:text; background-clip:text; color:transparent; filter:drop-shadow(0 2px 6px rgba(91,140,255,.25)); }

    .btn-brand{ background:#5b8cff; color:#fff; transition:box-shadow .2s, transform .2s, background .2s }
    .btn-brand:hover{ background:#0a46c7; box-shadow:0 10px 30px rgba(91,140,255,.35) }
    .btn-ghost:hover{ background:#f8fafc; }
    .btn-top{ backdrop-filter: blur(8px); background: rgba(91,140,255,.92); transition: opacity .2s, transform .2s, box-shadow .2s, background .2s; }
    .btn-top:hover{ box-shadow: 0 12px 36px rgba(91,140,255,.35); }

    /* PDF 뷰어 모달 */
    .pdf-modal{ inset:0; background:rgba(0,0,0,.5); }
    .pdf-panel{ width:min(100% - 24px, 1024px); height:min(90vh, 920px); display:flex; flex-direction:column; border-radius:1rem; overflow:hidden; box-shadow:0 20px 60px rgba(0,0,0,.25); }
    .pdf-toolbar{ display:flex; align-items:center; justify-content:space-between; gap:.75rem; padding:.75rem 1rem; background:#fff; border-bottom:1px solid rgba(15,23,42,.08); }
    .pdf-tools{ display:flex; align-items:center; gap:.5rem; }
    .pdf-btn{ display:inline-flex; align-items:center; justify-content:center; height:34px; padding:0 .75rem; border-radius:.5rem; border:1px solid rgba(15,23,42,.12); background:#fff; }
    .pdf-btn:hover{ background:#f8fafc; }
    .pdf-main{ position:relative; flex:1; background:#0b1220; display:flex; align-items:center; justify-content:center; overflow:auto; }
    .pdf-canvas{ background:#fff; box-shadow:0 6px 24px rgba(0,0,0,.25); border-radius:.5rem; }
    .pdf-loader{ position:absolute; top:12px; left:50%; transform:translateX(-50%); color:#cbd5e1; font-size:.9rem; pointer-events:none; }
    .pdf-msg{ position:absolute; inset:0; display:none; align-items:center; justify-content:center; color:#cbd5e1; font-size:.9rem; padding:1rem; text-align:center; }
    .pdf-msg.show{ display:flex; }
  </style>

  <!-- PDF.js (CDN) -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js" integrity="sha512-+s0y5c0y6JQb2lWw7G3Gq3i2l0SijvS2S3l7k4nq5s8X2vM8vGqgH8cLxY9V8Q6kQ8KZzH+1q5dWcX3QjQf24g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
  <script>
    // 워커 설정 (동일 버전)
    pdfjsLib.GlobalWorkerOptions.workerSrc = "https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js";
  </script>
</head>
<body class="bg-white text-slate-800 antialiased min-h-screen flex flex-col">
  <a href="#main" class="skip-link">본문으로 건너뛰기</a>

  <!-- 헤더 -->
  <header id="siteHeader" class="hdr border-b sticky top-0 z-40 transition-shadow">
    <div class="max-w-6xl mx-auto px-5 py-4 flex items-center justify-between">
      <a href="index.html" class="text-lg font-extrabold text-brand">회사명</a>
      <nav class="hidden md:flex items-center gap-6">
        <a href="about.html"   class="text-sm px-2 py-1 rounded-md font-bold hover:text-brand hover:bg-brand/10 transition">About</a>
        <a href="service.html" class="text-sm px-2 py-1 rounded-md font-bold hover:text-brand hover:bg-brand/10 transition">Service</a>
        <a href="notice.html"  class="text-sm px-2 py-1 rounded-md font-bold hover:text-brand hover:bg-brand/10 transition">Notice</a>
      </nav>
    </div>
  </header>

  <!-- 메인 -->
  <main id="main" class="flex-1">
    <!-- Hero -->
    <section id="hero" class="hero-wrap text-center px-5 py-16 md:py-28">
      <h1 class="text-2xl sm:text-3xl md:text-5xl font-extrabold leading-tight">
        카드 혜택을 <span class="gtext">자동</span>으로,  소비는 <span class="gtext">똑똑</span>하게
      </h1>
      <p class="mt-3 sm:mt-4 max-w-2xl mx-auto text-slate-600 text-sm sm:text-base">
        소비 패턴 분석으로 월간 혜택·포인트 손실을 최소화하는 <b>서비스</b>.
      </p>
      <div class="mt-5 sm:mt-6 flex flex-col sm:flex-row gap-2 sm:gap-3 justify-center">
        <button id="downloadBtn" class="btn-brand px-5 py-3 rounded-lg font-semibold">앱 다운로드</button>
        <button id="pdfPreviewBtn" class="btn-ghost px-5 py-3 rounded-lg border font-semibold">제안서 미리보기</button>
      </div>
    </section>

    <!-- Contact -->
    <section id="meeting" class="px-5 py-8 md:py-10 text-center border-t">
      <h2 class="text-xl md:text-2xl font-bold mb-2 md:mb-3">Contact us</h2>
      <p class="text-slate-600 text-sm md:text-base">문의는 이메일로 부탁드립니다.</p>
      <div class="mt-4 max-w-md mx-auto flex flex-col sm:flex-row gap-3 items-center justify-center">
        <code id="copyEmail" class="text-brand font-semibold break-all cursor-pointer" title="클릭하면 복사됩니다">admin@gmail.com</code>
        <div id="copyToast" class="hidden fixed left-1/2 -translate-x-1/2 bottom-24 md:bottom-10 bg-slate-900 text-white text-sm px-3 py-2 rounded-lg shadow-md z-50">복사되었어요</div>
      </div>
    </section>
  </main>

  <!-- 푸터 -->
  <footer class="border-t py-6 text-sm text-slate-500 mt-auto text-center">
    © <span id="year"></span> 회사명. All rights reserved.
  </footer>

  <!-- Back-to-top -->
  <button id="backTop" class="hidden fixed right-4 md:right-6 z-40 shadow-lg btn-top text-white h-10 px-3 min-w-[3rem] rounded-full text-sm font-semibold flex items-center justify-center" aria-label="맨위로">Top</button>

  <!-- PDF 뷰어 모달 -->
  <div id="pdfModal" class="pdf-modal hidden fixed flex items-center justify-center z-50 p-3">
    <div class="pdf-panel bg-white">
      <div class="pdf-toolbar">
        <div class="font-bold text-slate-800">제안서 미리보기</div>
        <div class="pdf-tools">
          <button id="btnPrev" class="pdf-btn" title="이전 페이지">←</button>
          <div id="pageInfo" class="text-sm text-slate-600 min-w-[88px] text-center">1 / 1</div>
          <button id="btnNext" class="pdf-btn" title="다음 페이지">→</button>
          <div class="w-px h-6 bg-slate-200 mx-1"></div>
          <button id="btnZoomOut" class="pdf-btn" title="축소">－</button>
          <button id="btnFit" class="pdf-btn" title="너비 맞춤">맞춤</button>
          <button id="btnZoomIn" class="pdf-btn" title="확대">＋</button>
          <div class="w-px h-6 bg-slate-200 mx-1"></div>
          <button id="openInNew" class="pdf-btn" title="새 탭에서 열기">새 탭에서 열기</button>
          <button id="closePdf" class="pdf-btn btn-brand text-white border-0" title="닫기">닫기</button>
        </div>
      </div>
      <div class="pdf-main" id="pdfMain">
        <div id="pdfLoader" class="pdf-loader">불러오는 중…</div>
        <div id="pdfMsg" class="pdf-msg"></div>
        <canvas id="pdfCanvas" class="pdf-canvas"></canvas>
      </div>
    </div>
  </div>

  <script>
    document.getElementById('year').textContent = new Date().getFullYear();

    // 이메일 복사 (HTTPS 외 환경 폴백 포함)
    (function(){
      const el=document.getElementById('copyEmail'), toast=document.getElementById('copyToast');
      if(!el||!toast) return;
      async function copy(t){
        if(window.isSecureContext && navigator.clipboard?.writeText){
          try{ await navigator.clipboard.writeText(t); return true; }catch{}
        }
        try{ const ta=document.createElement('textarea'); ta.value=t; ta.style.position='fixed'; ta.style.top='-9999px'; document.body.appendChild(ta); ta.select(); document.execCommand('copy'); ta.remove(); return true; }catch{ return false; }
      }
      const show=()=>{ toast.classList.remove('hidden'); clearTimeout(show._t); show._t=setTimeout(()=>toast.classList.add('hidden'),1600); };
      el.addEventListener('click', ()=> copy(el.textContent.trim()).then(ok=> ok&&show()));
    })();

    // Back-to-top
    (function(){
      const b=document.getElementById('backTop');
      const reduce=window.matchMedia('(prefers-reduced-motion: reduce)').matches;
      const onScroll=()=>{ if(window.scrollY>300) b.classList.remove('hidden'); else b.classList.add('hidden'); };
      window.addEventListener('scroll',onScroll,{passive:true});
      b.addEventListener('click',()=> reduce? window.scrollTo(0,0): window.scrollTo({top:0,behavior:'smooth'}));
      onScroll();
    })();

    // ===== PDF 뷰어 =====
    (function(){
      // ① 경로 설정: 실제 위치에 맞추어 수정 (웹에선 절대/상대 모두 OK)
      const PDF_URL = "/assets/SaveUp_test.pdf"; // ← 필요 시 경로 조정

      // ② 요소 참조
      const modal = document.getElementById('pdfModal');
      const openBtn = document.getElementById('pdfPreviewBtn');
      const closeBtn = document.getElementById('closePdf');
      const openNewBtn = document.getElementById('openInNew');
      const canvas = document.getElementById('pdfCanvas');
      const ctx = canvas.getContext('2d');
      const pageInfo = document.getElementById('pageInfo');
      const btnPrev = document.getElementById('btnPrev');
      const btnNext = document.getElementById('btnNext');
      const btnZoomIn = document.getElementById('btnZoomIn');
      const btnZoomOut = document.getElementById('btnZoomOut');
      const btnFit = document.getElementById('btnFit');
      const loader = document.getElementById('pdfLoader');
      const msg = document.getElementById('pdfMsg');
      const main = document.getElementById('pdfMain');

      // ③ 상태
      let pdfDoc=null, currentPage=1, totalPages=1, scale=1.0, fitToWidth=true, rendering=false;

      // ④ 유틸
      function showMsg(text){ msg.textContent=text; msg.classList.add('show'); }
      function hideMsg(){ msg.classList.remove('show'); msg.textContent=""; }
      function showLoader(v){ loader.style.display = v ? 'block' : 'none'; }

      function fitWidth(page){
        const containerW = main.clientWidth - 32; // 좌우 여백 여지
        const viewport = page.getViewport({scale:1});
        return Math.min(2.5, containerW / viewport.width); // 과도한 확대 방지
      }

      async function renderPage(num){
        if(!pdfDoc) return;
        rendering = true; showLoader(true); hideMsg();

        const page = await pdfDoc.getPage(num);
        if(fitToWidth){ scale = fitWidth(page); }

        const viewport = page.getViewport({scale});
        canvas.width = viewport.width; canvas.height = viewport.height;

        const task = page.render({canvasContext: ctx, viewport});
        await task.promise;

        pageInfo.textContent = `${currentPage} / ${totalPages}`;
        rendering = false; showLoader(false);
      }

      async function openModal(){
        modal.classList.remove('hidden');
        document.body.classList.add('overflow-hidden');
        showLoader(true); hideMsg();

        try{
          // fetch → ArrayBuffer → PDF.js 문서
          const res = await fetch(PDF_URL, {cache:'no-store', credentials:'same-origin'});
          if(!res.ok) throw new Error('HTTP '+res.status);
          const buf = await res.arrayBuffer();

          pdfDoc = await pdfjsLib.getDocument({data:buf}).promise;
          totalPages = pdfDoc.numPages;
          currentPage = 1; fitToWidth = true; scale = 1.0;

          await renderPage(currentPage);
        }catch(e){
          showMsg('미리보기를 표시할 수 없습니다. "새 탭에서 열기"를 눌러 확인해 주세요.');
          console.error(e);
          showLoader(false);
        }
      }

      function closeModal(){
        modal.classList.add('hidden');
        document.body.classList.remove('overflow-hidden');
        // 간단한 정리
        ctx && ctx.clearRect(0,0,canvas.width,canvas.height);
        pdfDoc = null;
      }

      // ⑤ 이벤트
      openBtn.addEventListener('click', openModal);
      closeBtn.addEventListener('click', closeModal);
      modal.addEventListener('click', e=>{ if(e.target===modal) closeModal(); });
      document.addEventListener('keydown', e=>{ if(e.key==='Escape' && !modal.classList.contains('hidden')) closeModal(); });

      openNewBtn.addEventListener('click', ()=> window.open(PDF_URL, '_blank', 'noopener,noreferrer'));

      btnPrev.addEventListener('click', async ()=>{
        if(rendering || !pdfDoc) return;
        if(currentPage<=1) return;
        currentPage--; await renderPage(currentPage);
      });
      btnNext.addEventListener('click', async ()=>{
        if(rendering || !pdfDoc) return;
        if(currentPage>=totalPages) return;
        currentPage++; await renderPage(currentPage);
      });

      btnZoomIn.addEventListener('click', async ()=>{
        if(rendering || !pdfDoc) return;
        fitToWidth=false; scale=Math.min(3, scale+0.2); await renderPage(currentPage);
      });
      btnZoomOut.addEventListener('click', async ()=>{
        if(rendering || !pdfDoc) return;
        fitToWidth=false; scale=Math.max(0.4, scale-0.2); await renderPage(currentPage);
      });
      btnFit.addEventListener('click', async ()=>{
        if(rendering || !pdfDoc) return;
        fitToWidth=true; await renderPage(currentPage);
      });

      // 창 사이즈 변경 시 너비맞춤 재렌더
      window.addEventListener('resize', ()=>{
        if(!pdfDoc || !fitToWidth || modal.classList.contains('hidden')) return;
        renderPage(currentPage);
      });
    })();
  </script>
</body>
</html>
